<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Proyecto de ejemplo — Diego Madruga</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <header class="site-header"><div class="container"><h1 class="brand">Proyecto de ejemplo</h1><nav class="main-nav"><a href="../index.html">Inicio</a><a href="index.html">Proyectos</a></nav></div></header>
  <main class="container">
    <h2>Proyecto de ejemplo</h2>
    <p>Este proyecto es una plantilla de ejemplo para tu portfolio. Incluye una breve descripción, tecnologías usadas y enlaces.</p>
    <br><h3>Tecnologías</h3>
    <ul>
      <li>Python</li>
      <li>PyTorch</li>
      <li>Wavelet Transforms</li>
    </ul>
    <br>
    <h3>Enlace</h3>
    <p><a href="https://github.com/zmadru/ExoPlanet-Detection">https://github.com/zmadru/ExoPlanet-Detection</a></p>
    
    <section class="section">
      <h3>Notebook: Exoplanet detection</h3>
      <div id="notebook-container" class="card" style="min-height:200px;">Cargando notebook...</div>
      <p class="muted" style="margin-top:.5rem">Nota: para que el notebook se cargue correctamente, sirve el sitio por HTTP (GitHub Pages o un servidor local). Si abres los archivos con `file://` la carga puede fallar.</p>
    </section>
  </main>
  <footer class="site-footer"><div class="container"><p>&copy; 2025 Diego Madruga</p></div></footer>
  <!-- notebookjs: renderiza notebooks .ipynb en el navegador -->
  <script src="https://unpkg.com/notebookjs@1.4.3/dist/notebook.min.js"></script>
  <script>
    (async function(){
      const container = document.getElementById('notebook-container');
      const NB = window.notebookjs && (window.notebookjs.Notebook || window.notebookjs.notebook || window.notebookjs);
      if(!NB){
        container.innerText = 'No se encontró la librería de visualización (notebookjs). Comprueba conexión a CDN.';
        return;
      }

      // Fuentes a probar: inline JSON (si existe), ruta relativa en el repo, y raw.githubusercontent como fallback
      const rawUrl = 'https://raw.githubusercontent.com/zmadru/diegomadruga.github.io/main/files/Shallue_compactoWL.ipynb';
      const sources = [
        {type:'inline', elId:'notebook-json'},
        {type:'relative', url:'../files/Shallue_compactoWL.ipynb'},
        {type:'raw', url: rawUrl}
      ];

      let nb = null;
      let lastErr = null;
      for(const s of sources){
        try{
          if(s.type === 'inline'){
            const el = document.getElementById(s.elId);
            if(el && el.textContent.trim()){
              nb = JSON.parse(el.textContent);
              break;
            }
            continue;
          }
          const res = await fetch(s.url, {cache: 'no-cache'});
          if(!res.ok) throw new Error('HTTP ' + res.status + ' al cargar ' + s.url);
          nb = await res.json();
          break;
        }catch(e){
          lastErr = e;
          console.warn('No se pudo cargar notebook desde', s, e);
        }
      }

      if(!nb){
        container.innerHTML = '<pre style="color:#f88">No se pudo cargar el notebook. Último error:\n' + String(lastErr) + '\n\nComprueba consola de red/errores y que `files/Shallue_compactoWL.ipynb` esté en la rama `main`.</pre>';
        return;
      }

      try{
        const viewer = new NB(nb);
        if(typeof viewer.render === 'function') viewer.render();
        const el = viewer.el || viewer.element || viewer.node || viewer;
        container.innerHTML = '';
        if(el && el.nodeType) container.appendChild(el);
        else container.appendChild(document.createTextNode('Notebook cargado (pero no se pudo renderizar automáticamente).'));
      }catch(err){
        container.innerHTML = '<pre style="color:#f88">Error al renderizar el notebook:\n' + String(err) + '</pre>';
      }
    })();
  </script>
  <script src="../js/main.js"></script>
</body>
</html>